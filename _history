{"entries":[{"timestamp":1747627601017,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":157,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":1,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":179,"length1":89,"diffs":[[1,"        \"assets.json\"\n"]]},{"start1":208,"length1":75,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"main.py","value":"# --- Imports (se necessário, mas randint é geralmente global no MakeCode Python) ---\n# from random import randint # Geralmente não é necessário no MakeCode Arcade Python\n\n# --- Tipos de Sprite ---\n# SpriteKind.player já existe\nRaindrop = SpriteKind.create()\n\n# --- Variáveis Globais ---\nplayer_sprite: Sprite = None\nbase_raindrop_speed = 25  # Velocidade inicial das gotas\ncurrent_raindrop_speed = base_raindrop_speed\nscore_for_difficulty_increase = 50  # Aumenta dificuldade a cada X pontos\nnext_difficulty_increase_score = score_for_difficulty_increase\n\nraindrop_spawn_interval = 2000  # ms (tempo entre novas gotas)\nmin_raindrop_spawn_interval = 600  # ms (intervalo mínimo de spawn)\nspawn_timer = 0  # Contador para o próximo spawn\n\n# --- Configurações Iniciais do Jogo ---\ndef start_game():\n    global player_sprite, current_raindrop_speed, next_difficulty_increase_score\n    global raindrop_spawn_interval, spawn_timer\n\n    # Reinicializa variáveis para um novo jogo (caso seja chamado após um game over)\n    current_raindrop_speed = base_raindrop_speed\n    next_difficulty_increase_score = score_for_difficulty_increase\n    raindrop_spawn_interval = 2000\n    spawn_timer = 0\n\n    scene.set_background_image(img(\"\"\"\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\n    \"\"\"))\n    # Se quiser um efeito de chuva simples (não tão bom quanto o JS original, mas algo)\n    # effects.bubbles.start_screen_effect(500) # Ou star_field, etc.\n\n    player_sprite = sprites.create(img(\"\"\"\n        . . . . . . . . . . . . . . . .\n        . . . . . f f f f f f . . . . .\n        . . . . f 5 5 5 5 5 5 f . . . .\n        . . . f 5 5 5 5 5 5 5 5 f . . .\n        . . f 5 5 5 5 5 5 5 5 5 5 f . .\n        . f 5 5 5 5 5 5 5 5 5 5 5 5 f .\n        . f d d d d d d d d d d d d f .\n        . f d d d d d d d d d d d d f .\n        . . f f f f f f f f f f f f . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n        . . . . . . . . . . . . . . . .\n    \"\"\"), SpriteKind.player)\n    player_sprite.set_position(screen.width // 2, screen.height - 15)\n    player_sprite.set_stay_in_screen(True)\n    controller.move_sprite(player_sprite, 120, 0)\n\n    info.set_score(0)\n    info.set_life(3)\n\n# --- Criar Gotas de Chuva ---\ndef create_raindrop():\n    global current_raindrop_speed\n    num1 = randint(1, 9)\n    num2 = randint(1, 9)\n    operation_type = randint(0, 2)  # 0: Adição, 1: Subtração, 2: Multiplicação\n    \n    problem_text = \"\"\n    correct_answer = 0\n\n    if operation_type == 0:  # Adição\n        problem_text = f\"{num1} + {num2}\"\n        correct_answer = num1 + num2\n    elif operation_type == 1:  # Subtração (garantir resultado positivo)\n        if num1 < num2:  # Troca os números se num1 for menor\n            num1, num2 = num2, num1 # Pythonic swap\n        problem_text = f\"{num1} - {num2}\"\n        correct_answer = num1 - num2\n    else:  # Multiplicação\n        num1 = randint(1, 7)  # Números menores para multiplicação inicial\n        num2 = randint(1, 7)\n        problem_text = f\"{num1} × {num2}\"  # Usar '×' para visual\n        correct_answer = num1 * num2\n\n    raindrop_sprite = sprites.create(img(\"\"\"\n        . . . . . . . .\n        . . . 4 4 . . .\n        . . 4 5 5 4 . .\n        . 4 5 5 5 5 4 .\n        . 4 5 5 5 5 4 .\n        . 4 5 5 5 5 4 .\n        . 4 4 5 5 4 4 .\n        . . 4 4 4 4 . .\n    \"\"\"), Raindrop)\n\n    raindrop_sprite.say(problem_text, raindrop_spawn_interval * 1.5)\n\n    # Armazenar dados na gota para uso posterior\n    # MakeCode Python sprites têm um dicionário 'data'\n    raindrop_sprite.data[\"problem\"] = problem_text\n    raindrop_sprite.data[\"answer\"] = correct_answer\n    raindrop_sprite.data[\"processed\"] = False  # Flag para evitar processamento duplo\n\n    raindrop_sprite.set_position(randint(10, screen.width - 10), 0 - raindrop_sprite.height)\n    raindrop_sprite.vy = current_raindrop_speed\n    raindrop_sprite.set_flag(SpriteFlag.AUTO_DESTROY, True)\n\n# --- Loop Principal para Criar Gotas ---\ndef on_update_interval():\n    global spawn_timer\n    if info.life() <= 0:\n        return\n\n    spawn_timer += game.event_context().delta_time * 1000 # delta_time é em segundos\n\n    if spawn_timer >= raindrop_spawn_interval:\n        create_raindrop()\n        spawn_timer = 0 # Reseta o contador\ngame.on_update(on_update_interval)\n\n\n# --- Colisão: Jogador coleta Gota ---\ndef on_player_overlap_raindrop(sprite: Sprite, otherSprite: Sprite):\n    global current_raindrop_speed, next_difficulty_increase_score, raindrop_spawn_interval\n    \n    # Ignorar se a gota já foi processada ou se o jogo acabou\n    if otherSprite.data.get(\"processed\") or info.life() <= 0:\n        return\n    otherSprite.data[\"processed\"] = True # Marcar como processada\n\n    problem = otherSprite.data.get(\"problem\")\n    correct_answer = otherSprite.data.get(\"answer\")\n\n    otherSprite.destroy() # Destruir a gota IMEDIATAMENTE\n\n    # Perguntar a resposta ao jogador\n    answer_length = len(str(correct_answer))\n    if answer_length == 0: # Caso especial para resposta 0, por exemplo.\n        answer_length = 1\n        \n    user_answer = game.ask_for_number(f\"Resolva: {problem}?\", answer_length)\n\n    if user_answer == correct_answer:\n        info.change_score_by(10)\n        music.ba_ding.play()\n        sprite.say(\"👍\", 300) # Feedback positivo\n    else:\n        info.change_life_by(-1)\n        music.wawawawaa.play() # Som de erro\n        sprite.say(f\"👎 Era {correct_answer}\", 800) # Feedback negativo com resposta\n\n    # Verificar aumento de dificuldade (se o jogador ainda tiver vidas)\n    if info.score() >= next_difficulty_increase_score and info.life() > 0:\n        current_raindrop_speed += 7\n        if raindrop_spawn_interval > min_raindrop_spawn_interval:\n            raindrop_spawn_interval -= 200\n        next_difficulty_increase_score += score_for_difficulty_increase\nsprites.on_overlap(SpriteKind.player, Raindrop, on_player_overlap_raindrop)\n\n# --- Gota atinge o chão (não foi coletada) ---\ndef on_raindrop_destroyed(destroyed_sprite: Sprite):\n    # Só penaliza se a gota NÃO foi processada (ou seja, não coletada pelo jogador)\n    # E se o jogador ainda tem vidas.\n    if not destroyed_sprite.data.get(\"processed\") and info.life() > 0:\n        # Verifica se a gota foi destruída perto da parte inferior da tela\n        if destroyed_sprite.bottom >= screen.height - 5: # 5 é uma pequena margem\n            info.change_life_by(-1)\n            music.power_down.play() # Som de perda\n            scene.camera_shake(4, 200) # Efeito de tela tremendo\nsprites.on_destroyed(Raindrop, on_raindrop_destroyed)\n\n# --- Game Over ---\ndef on_life_zero():\n    game.over(False, effects.splatter)\ninfo.on_life_zero(on_life_zero)\n\n# --- Iniciar o Jogo ---\nstart_game()\n"},{"type":"added","filename":"images.g.jres","value":"{\n    \"anim1\": {\n        \"namespace\": \"myAnimations\",\n        \"id\": \"anim1\",\n        \"mimeType\": \"application/mkcd-animation\",\n        \"data\": \"YzgwMDEwMDAxMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA=\",\n        \"displayName\": \"myAnim\"\n    },\n    \"*\": {\n        \"mimeType\": \"image/x-mkcd-f4\",\n        \"dataEncoding\": \"base64\",\n        \"namespace\": \"myImages\"\n    }\n}"},{"type":"added","filename":"images.g.ts","value":"// Auto-generated code. Do not edit.\nnamespace myImages {\n\n    helpers._registerFactory(\"image\", function(name: string) {\n        switch(helpers.stringTrim(name)) {\n\n        }\n        return null;\n    })\n\n    helpers._registerFactory(\"animation\", function(name: string) {\n        switch(helpers.stringTrim(name)) {\n            case \"myAnim\":\n            case \"anim1\":return [img`\n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n. . . . . . . . . . . . . . . . \n`];\n        }\n        return null;\n    })\n\n    helpers._registerFactory(\"song\", function(name: string) {\n        switch(helpers.stringTrim(name)) {\n\n        }\n        return null;\n    })\n\n}\n// Auto-generated code. Do not edit.\n"}]}],"snapshots":[{"timestamp":1747627601016,"editorVersion":"2.0.56","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>","main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"RainDrops\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}}],"shares":[],"lastSaveTime":1747627781382}